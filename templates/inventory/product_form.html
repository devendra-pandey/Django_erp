{% extends 'base.html' %}

{% block title %}{{ title }} - Manufacturing ERP{% endblock %}
{% block page_title %}{{ title }}{% endblock %}

{% block breadcrumbs %}
    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
    <li class="breadcrumb-item"><a href="{% url 'inventory:product_list' %}">Products</a></li>
    <li class="breadcrumb-item active">{{ title }}</li>
{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Product Information</h5>
            </div>
            <div class="card-body">
                <form method="post" novalidate>
                    {% csrf_token %}
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="id_SKU" class="form-label">SKU*</label>
                                {{ form.SKU }}
                                {% if form.SKU.errors %}
                                    <div class="text-danger mt-1">{{ form.SKU.errors }}</div>
                                {% endif %}
                                <small class="form-text text-muted">{{ form.SKU.help_text }}</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="id_name" class="form-label">Product Name*</label>
                                {{ form.name }}
                                {% if form.name.errors %}
                                    <div class="text-danger mt-1">{{ form.name.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="id_description" class="form-label">Description</label>
                        {{ form.description }}
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="id_category" class="form-label">Category</label>
                                {{ form.category }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="id_product_type" class="form-label">Product Type</label>
                                {{ form.product_type }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="id_unit_of_measure" class="form-label">Unit of Measure*</label>
                                {{ form.unit_of_measure }}
                                {% if form.unit_of_measure.errors %}
                                    <div class="text-danger mt-1">{{ form.unit_of_measure.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="id_min_stock" class="form-label">Min Stock</label>
                                {{ form.min_stock }}
                                <small class="form-text text-muted">{{ form.min_stock.help_text }}</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="id_max_stock" class="form-label">Max Stock</label>
                                {{ form.max_stock }}
                                <small class="form-text text-muted">{{ form.max_stock.help_text }}</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3 form-check form-switch">
                        {{ form.is_active }}
                        <label class="form-check-label" for="id_is_active">
                            Active Product
                        </label>
                    </div>
                    
                    <div class="d-flex justify-content-between mt-4">
                        <a href="{% url 'inventory:product_list' %}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left me-1"></i> Cancel
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-1"></i> Save Product
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    $(document).ready(function() {
        // Add form-control class to all inputs if not already present
        $('input, select, textarea').each(function() {
            if (!$(this).hasClass('form-control') && 
                !$(this).hasClass('form-check-input') && 
                this.type !== 'hidden') {
                $(this).addClass('form-control');
            }
        });
        
        // Make checkboxes look better
        $('input[type="checkbox"]').addClass('form-check-input');
        
        // Add event listener for form validation
        $('form').on('submit', function() {
            // You can add custom validation here
            return true;
        });
    });
</script>
{% endblock %}